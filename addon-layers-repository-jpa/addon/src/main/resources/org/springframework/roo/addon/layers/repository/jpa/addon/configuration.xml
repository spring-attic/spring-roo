<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<configuration>
  <multimodule>
    <dependencies>
      <dependency>
        <groupId>com.querydsl</groupId>
        <artifactId>querydsl-jpa</artifactId>
      </dependency>
    </dependencies>
    <plugins>
      <plugin>
        <groupId>com.querydsl</groupId>
        <artifactId>querydsl-maven-plugin</artifactId>
        <version>${querydsl.version}</version>
        <executions>
          <execution>
            <id>generate-qtypes</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>jpa-export</goal>
            </goals>
            <configuration>
              <targetFolder>target/generated-sources/java</targetFolder>
              <packages>
                <package>org.springframework.data.jpa.domain.support</package>
              </packages>
            </configuration>
          </execution>
          <execution>
            <id>compile-qtypes</id>
            <goals>
              <goal>compile</goal>
            </goals>
            <configuration>
              <sourceFolder>target/generated-sources/java</sourceFolder>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </multimodule>

  <monomodule>
    <dependencies>
      <dependency>
        <groupId>com.querydsl</groupId>
        <artifactId>querydsl-jpa</artifactId>
      </dependency>
      <dependency>
        <groupId>org.springframework.roo</groupId>
        <artifactId>org.springframework.roo.querydsl.processor</artifactId>
        <version>2.0.0.RELEASE</version>
      </dependency>
    </dependencies>
    <plugins>
      <plugin>
        <groupId>com.mysema.maven</groupId>
        <artifactId>apt-maven-plugin</artifactId>
        <version>1.1.3</version>
        <executions>
          <execution>
            <goals>
              <goal>process</goal>
            </goals>
            <configuration>
              <outputDirectory>target/generated-sources/java</outputDirectory>
              <processors>
                <processor>org.springframework.roo.querydsl.processor.RooAnnotationProcessor
                </processor>
              </processors>
            </configuration>
          </execution>
        </executions>
		<dependencies>
		  <dependency>
			<groupId>com.querydsl</groupId>
			<artifactId>querydsl-apt</artifactId>
			<version>${querydsl.version}</version>
		  </dependency>
        </dependencies>
      </plugin>
    </plugins>

    <repositories>
      <repository>
        <id>spring roo repository</id>
        <url>http://repo.spring.io/spring-roo</url>
      </repository>
    </repositories>
  </monomodule>

</configuration>